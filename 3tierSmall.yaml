name: 3tierSmall
prefix: null
mgmt:
   ipv4-subnet: 10.7.7.0/24
settings: null
topology:
  kinds:
    srl:
      image: ghcr.io/nokia/srlinux:latest
      license: license/lic-srl.txt
    vr-sros:
      image: registry.srlinux.dev/pub/vr-sros:23.7.R1
      type: "cp: cpu=2 ram=6 chassis=SR-2s slot=A card=cpm-2s ___ lc: cpu=2 ram=4 max_nics=10 chassis=SR-2s slot=1 card=xcm-2s mda/1=s18-100gb-qsfp28"
      license: license/lic-sros.txt
  nodes:
    topoviewer:
      kind: linux
      mgmt-ipv4: 10.7.7.201
      image: ghcr.io/asadarafat/topoviewer:latest
      ports:
        - 8080:8080
      startup-delay: 4
      exec:
        - '/opt/topoviewer/topoviewer clab -H 149.204.21.68 -P 8080 -u suuser -p j0k0w1 -j local-bind/topo-file.json' 
           ### "root" corresponds to the server username where containerLab is currently operational.
           ### "j0k0w1", corresponds to user's password, we only need this for seamless link-impairment feature.
           ### "149.204.21.68", corresponds to the server IP address where containerLab is currently operational.
           ### "8080", corresponds to the port where the topoviewer service will be listening.
                 
      binds:
        - /var/run/docker.sock:/var/run/docker.sock:ro
        - __clabDir__/topology-data.json:/opt/topoviewer/local-bind/topo-file.json:ro
          ### __clabDir__/topology-data.json is path to clab's json file which generated by "clab --export-template" and /opt/topoviewer/local-bind/topo-file.json is the mount path of topoviever's topology file.
      labels:
        topoviewer-role: controller
    leaf-1:
      kind: srl
      mgmt-ipv4: 10.7.7.11
      group: tier-1      
      labels:
          topoviewer-role: leaf
    leaf-2:
      kind: srl
      mgmt-ipv4: 10.7.7.12
      group: tier-1      
      labels:
          topoviewer-role: leaf
    leaf-3:
      kind: srl
      mgmt-ipv4: 10.7.7.13
      group: tier-1      
      labels:
          topoviewer-role: leaf
    leaf-4:
      kind: srl
      mgmt-ipv4: 10.7.7.14
      group: tier-1      
      labels:
          topoviewer-role: leaf
    leaf-5:
      kind: srl
      mgmt-ipv4: 10.7.7.15
      group: tier-1      
      labels:
          topoviewer-role: leaf
    leaf-6:
      kind: srl
      mgmt-ipv4: 10.7.7.16
      group: tier-1      
      labels:
          topoviewer-role: leaf
    leaf-7:
      kind: srl
      mgmt-ipv4: 10.7.7.17
      group: tier-1      
      labels:
          topoviewer-role: leaf
    leaf-8:
      kind: srl
      mgmt-ipv4: 10.7.7.18
      group: tier-1      
      labels:
          topoviewer-role: leaf
    leaf-9:
      kind: srl
      mgmt-ipv4: 10.7.7.19
      group: tier-1      
      labels:
          topoviewer-role: leaf
    leaf-10:
      kind: srl
      mgmt-ipv4: 10.7.7.20
      group: tier-1      
      labels:
          topoviewer-role: leaf
    spine-1:
      kind: srl
      mgmt-ipv4: 10.7.7.21
      group: tier-2     
      labels:
          topoviewer-role: spine
    spine-2:
      kind: srl
      mgmt-ipv4: 10.7.7.22
      group: tier-2     
      labels:
          topoviewer-role: spine
    dcgw-1:
      kind: vr-sros
      mgmt-ipv4: 10.7.7.31
      group: tier-3
      labels:
          topoviewer-role: dcgw
    dcgw-2:
      kind: vr-sros
      mgmt-ipv4: 10.7.7.32
      group: tier-3
      labels:
          topoviewer-role: dcgw
  links:
  - endpoints:
    - leaf-1:e1-1
    - spine-1:e1-1
  - endpoints:
    - leaf-1:e1-2
    - spine-2:e1-1
  - endpoints:
    - leaf-2:e1-1
    - spine-1:e1-2
  - endpoints:
    - leaf-2:e1-2
    - spine-2:e1-2
  - endpoints:
    - leaf-3:e1-1
    - spine-1:e1-3
  - endpoints:
    - leaf-3:e1-2
    - spine-2:e1-3
  - endpoints:
    - leaf-4:e1-1
    - spine-1:e1-4
  - endpoints:
    - leaf-4:e1-2
    - spine-2:e1-4
  - endpoints:
    - leaf-5:e1-1
    - spine-1:e1-5
  - endpoints:
    - leaf-5:e1-2
    - spine-2:e1-5
  - endpoints:
    - leaf-6:e1-1
    - spine-1:e1-6
  - endpoints:
    - leaf-6:e1-2
    - spine-2:e1-6
  - endpoints:
    - leaf-7:e1-1
    - spine-1:e1-7
  - endpoints:
    - leaf-7:e1-2
    - spine-2:e1-7
  - endpoints:
    - leaf-8:e1-1
    - spine-1:e1-8
  - endpoints:
    - leaf-8:e1-2
    - spine-2:e1-8
  - endpoints:
    - leaf-9:e1-1
    - spine-1:e1-9
  - endpoints:
    - leaf-9:e1-2
    - spine-2:e1-9
  - endpoints:
    - leaf-10:e1-1
    - spine-1:e1-10
  - endpoints:
    - leaf-10:e1-2
    - spine-2:e1-10
  - endpoints:
    - spine-1:e1-11
    - dcgw-1:eth1
  - endpoints:
    - spine-1:e1-12
    - dcgw-2:eth1
  - endpoints:
    - spine-2:e1-11
    - dcgw-1:eth2
  - endpoints:
    - spine-2:e1-12
    - dcgw-2:eth2
  - endpoints:
    - dcgw-1:eth3 
    - dcgw-2:eth3
debug: false
